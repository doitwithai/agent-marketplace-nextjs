'use client'
import {useState} from 'react'; import Link from 'next/link'; import {redact} from '@/lib/redact'
const DEMO={id:'l1',title:'Sales Email Writer',desc:'Generates tailored outbound sequences and follow-ups.',price:99,sub:29,category:'Sales'}
export default function Listing(){const [mode,setMode]=useState<'one'|'sub'|'escrow'>('one'); const [chat,setChat]=useState<string[]>(['Buyer: Can you integrate HubSpot?','Builder: Yes, included in Pro.']); const [msg,setMsg]=useState(''); return (<div className='grid' style={{gridTemplateColumns:'2fr 1fr',gap:16}}><div className='grid'><div className='card'><h2 className='text-2xl font-semibold mb-2'>{DEMO.title}</h2><p className='text-muted'>{DEMO.desc}</p><div className='text-sm text-muted'>Category: {DEMO.category}</div></div><div className='card'><div className='font-medium mb-2'>Ask the seller (PII redacted)</div><div className='card' style={{background:'#f9fafb',maxHeight:180,overflow:'auto',marginBottom:8}}>{chat.map((c,i)=>(<div key={i} className='text-sm mb-1'>{c}</div>))}</div><div className='flex gap-2'><input className='input' placeholder='Type a message' value={msg} onChange={e=>setMsg(e.target.value)}/><button className='btn' onClick={()=>{setChat([...chat,'You: '+redact(msg)]); setMsg('')}}>Send</button></div><div className='text-xs text-muted mt-2'>Emails/phones/links are redacted to keep transactions on-platform.</div></div></div><div className='grid'><div className='card'><div className='font-medium mb-2'>Pricing</div><label className='flex-between card mb-2'><span>One-time</span><input type='radio' checked={mode==='one'} onChange={()=>setMode('one')}/></label>{DEMO.sub && <label className='flex-between card mb-2'><span>Subscription</span><input type='radio' checked={mode==='sub'} onChange={()=>setMode('sub')}/></label>}<label className='flex-between card mb-3'><span>Service via Escrow</span><input type='radio' checked={mode==='escrow'} onChange={()=>setMode('escrow')}/></label><Link href='/checkout' className='btn w-full'>Checkout</Link><div className='text-xs text-muted mt-2'>Commission & net to builder are shown on confirmation.</div></div><div className='card text-sm text-muted'><div>✅ Escrow & disputes</div><div>✅ Anti-circumvention terms</div><div>✅ License included (IP retained by builder)</div></div></div></div>)}
